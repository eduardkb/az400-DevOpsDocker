# Use official Node LTS image
FROM node:20

# Set working directory
WORKDIR /usr/src/app

# Copy package files
COPY package*.json ./

# Install dependencies
RUN npm install --omit=dev

# Copy application code
COPY . .

# Expose the port your app uses
EXPOSE 4000

# Use the env variables from .env
# (you can also pass them at runtime, safer for secrets)
ENV PORT=4000
ENV CORS_ORIGIN=http://localhost
ENV MYSQLSERVER=localhost
ENV MYSQLUSER=user
ENV MYSQLPASSWORD=MyS&cretUs&rP@ss12
ENV MYSQLDB=appdb

# Start the app
CMD ["node", "src/index.js"]
